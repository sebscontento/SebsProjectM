MILKDROP_PRESET_VERSION=201
PSVERSION=3
PSVERSION_WARP=2
PSVERSION_COMP=3
[preset00]
fRating=4.000
fGammaAdj=1.980
fDecay=0.500
fVideoEchoZoom=1.000
fVideoEchoAlpha=0.500
nVideoEchoOrientation=3
nWaveMode=0
bAdditiveWaves=1
bWaveDots=0
bWaveThick=0
bModWaveAlphaByVolume=0
bMaximizeWaveColor=0
bTexWrap=0
bDarkenCenter=0
bRedBlueStereo=0
bBrighten=0
bDarken=1
bSolarize=0
bInvert=0
fWaveAlpha=0.001
fWaveScale=0.010
fWaveSmoothing=0.900
fWaveParam=1.000
fModWaveAlphaStart=0.710
fModWaveAlphaEnd=1.300
fWarpAnimSpeed=1.000
fWarpScale=1.000
fZoomExponent=1.00170
fShader=0.000
zoom=0.97030
rot=0.00000
cx=0.440
cy=0.500
dx=0.00000
dy=0.00000
warp=0.01000
sx=1.00000
sy=1.00000
wave_r=1.000
wave_g=1.000
wave_b=1.000
wave_x=0.500
wave_y=0.500
ob_size=0.000
ob_r=0.000
ob_g=0.000
ob_b=0.000
ob_a=0.000
ib_size=0.000
ib_r=0.500
ib_g=0.500
ib_b=0.500
ib_a=0.000
nMotionVectorsX=6.400
nMotionVectorsY=4.800
mv_dx=0.000
mv_dy=0.000
mv_l=5.000
mv_r=1.000
mv_g=1.000
mv_b=0.000
mv_a=0.000
b1n=0.000
b2n=0.000
b3n=0.000
b1x=1.000
b2x=1.000
b3x=1.000
b1ed=0.000
wavecode_0_enabled=0
wavecode_0_samples=512
wavecode_0_sep=0
wavecode_0_bSpectrum=0
wavecode_0_bUseDots=0
wavecode_0_bDrawThick=0
wavecode_0_bAdditive=0
wavecode_0_scaling=1.00000
wavecode_0_smoothing=0.50000
wavecode_0_r=1.000
wavecode_0_g=1.000
wavecode_0_b=1.000
wavecode_0_a=1.000
wavecode_1_enabled=0
wavecode_1_samples=512
wavecode_1_sep=0
wavecode_1_bSpectrum=0
wavecode_1_bUseDots=0
wavecode_1_bDrawThick=0
wavecode_1_bAdditive=0
wavecode_1_scaling=1.00000
wavecode_1_smoothing=0.50000
wavecode_1_r=1.000
wavecode_1_g=1.000
wavecode_1_b=1.000
wavecode_1_a=1.000
wavecode_2_enabled=0
wavecode_2_samples=512
wavecode_2_sep=0
wavecode_2_bSpectrum=0
wavecode_2_bUseDots=0
wavecode_2_bDrawThick=0
wavecode_2_bAdditive=0
wavecode_2_scaling=1.00000
wavecode_2_smoothing=0.50000
wavecode_2_r=1.000
wavecode_2_g=1.000
wavecode_2_b=1.000
wavecode_2_a=1.000
wavecode_3_enabled=0
wavecode_3_samples=512
wavecode_3_sep=0
wavecode_3_bSpectrum=0
wavecode_3_bUseDots=0
wavecode_3_bDrawThick=0
wavecode_3_bAdditive=0
wavecode_3_scaling=1.00000
wavecode_3_smoothing=0.50000
wavecode_3_r=1.000
wavecode_3_g=1.000
wavecode_3_b=1.000
wavecode_3_a=1.000
shapecode_0_enabled=0
shapecode_0_sides=4
shapecode_0_additive=0
shapecode_0_thickOutline=0
shapecode_0_textured=1
shapecode_0_num_inst=1
shapecode_0_x=0.220
shapecode_0_y=0.500
shapecode_0_rad=1.46815
shapecode_0_ang=0.00000
shapecode_0_tex_ang=0.00000
shapecode_0_tex_zoom=0.57853
shapecode_0_r=1.000
shapecode_0_g=1.000
shapecode_0_b=1.000
shapecode_0_a=1.000
shapecode_0_r2=1.000
shapecode_0_g2=1.000
shapecode_0_b2=1.000
shapecode_0_a2=0.000
shapecode_0_border_r=1.000
shapecode_0_border_g=1.000
shapecode_0_border_b=1.000
shapecode_0_border_a=0.000
shapecode_1_enabled=0
shapecode_1_sides=4
shapecode_1_additive=0
shapecode_1_thickOutline=0
shapecode_1_textured=0
shapecode_1_num_inst=1
shapecode_1_x=0.500
shapecode_1_y=0.500
shapecode_1_rad=0.10000
shapecode_1_ang=0.00000
shapecode_1_tex_ang=0.00000
shapecode_1_tex_zoom=1.00000
shapecode_1_r=1.000
shapecode_1_g=0.000
shapecode_1_b=0.000
shapecode_1_a=1.000
shapecode_1_r2=0.000
shapecode_1_g2=1.000
shapecode_1_b2=0.000
shapecode_1_a2=0.000
shapecode_1_border_r=1.000
shapecode_1_border_g=1.000
shapecode_1_border_b=1.000
shapecode_1_border_a=0.100
shapecode_2_enabled=0
shapecode_2_sides=4
shapecode_2_additive=0
shapecode_2_thickOutline=0
shapecode_2_textured=0
shapecode_2_num_inst=1
shapecode_2_x=0.500
shapecode_2_y=0.500
shapecode_2_rad=0.10000
shapecode_2_ang=0.00000
shapecode_2_tex_ang=0.00000
shapecode_2_tex_zoom=1.00000
shapecode_2_r=1.000
shapecode_2_g=0.000
shapecode_2_b=0.000
shapecode_2_a=1.000
shapecode_2_r2=0.000
shapecode_2_g2=1.000
shapecode_2_b2=0.000
shapecode_2_a2=0.000
shapecode_2_border_r=1.000
shapecode_2_border_g=1.000
shapecode_2_border_b=1.000
shapecode_2_border_a=0.100
shapecode_3_enabled=0
shapecode_3_sides=4
shapecode_3_additive=0
shapecode_3_thickOutline=0
shapecode_3_textured=0
shapecode_3_num_inst=1
shapecode_3_x=0.500
shapecode_3_y=0.500
shapecode_3_rad=0.10000
shapecode_3_ang=0.00000
shapecode_3_tex_ang=0.00000
shapecode_3_tex_zoom=1.00000
shapecode_3_r=1.000
shapecode_3_g=0.000
shapecode_3_b=0.000
shapecode_3_a=1.000
shapecode_3_r2=0.000
shapecode_3_g2=1.000
shapecode_3_b2=0.000
shapecode_3_a2=0.000
shapecode_3_border_r=1.000
shapecode_3_border_g=1.000
shapecode_3_border_b=1.000
shapecode_3_border_a=0.100
per_frame_1=warp=0;
per_frame_2=old_bass_flop=bass_flop;
per_frame_3=old_treb_flop=treb_flop;
per_frame_4=old_mid_flop=mid_flop;
per_frame_5=chaos=.9+.1*sin(pulse);
per_frame_6=entropy=if(bnot(entropy),2,if(equal(pulse,-20),1+int(rand(3)),entropy));
per_frame_7=bass_thresh = above(bass_att,bass_thresh)*2 + (1-above(bass_att,bass_thresh))*((bass_thresh-1.3)*chaos+1.3);
per_frame_8=bass_flop=abs(bass_flop-equal(bass_thresh,2));
per_frame_9=treb_thresh=above(treb_att,treb_thresh)*2 + (1-above(treb_att,treb_thresh))*((treb_thresh-1.3)*chaos+1.3);
per_frame_10=treb_flop=abs(treb_flop-equal(treb_thresh,2));
per_frame_11=mid_thresh=above(mid_att,mid_thresh)*2 + (1-above(mid_att,mid_thresh))*((mid_thresh-1.3)*chaos+1.3);
per_frame_12=mid_flop=abs(mid_flop-equal(mid_thresh,2));
per_frame_13=bass_changed=bnot(equal(old_bass_flop,bass_flop));
per_frame_14=mid_changed=bnot(equal(old_mid_flop,mid_flop));
per_frame_15=treb_changed=bnot(equal(old_treb_flop,treb_flop));
per_frame_16=bass_residual = bass_changed*sin(time*(3-bass_thresh)) + bnot(bass_changed)*bass_residual;
per_frame_17=treb_residual = treb_changed*sin(time*(3-treb_thresh)) + bnot(treb_changed)*treb_residual;
per_frame_18=mid_residual = mid_changed*sin(time*(3-mid_thresh)) + bnot(mid_changed)*mid_residual;
per_frame_19=pulse=if(above(abs(pulse),20),-20,pulse+.04*entropy*bor(bor(bass_changed*bnot(treb_changed),treb_changed*bnot(bass_changed))*bnot(mid_changed),mid_changed)+(mid+bass+treb)*.025);
per_frame_20=q1=mid_residual;
per_frame_21=q2=bass_residual;
per_frame_22=q3=treb_residual;
per_frame_23=q4=sin(pulse);
per_frame_24=q5=cos(pulse);
per_frame_25=wave_r=wave_r+.5*bass_residual;
per_frame_26=wave_r=wave_g+.5*mid_residual;
per_frame_27=wave_r=wave_b+.5*treb_residual;
per_frame_28=wave_mystery=wave_mystery+.23*mid_residual;
per_frame_29=ob_r=if(bass_flop,treb_flop,wave_r);
per_frame_30=ob_b=if(treb_flop,mid_flop,wave_b);
per_frame_31=ob_g=if(mid_flop,bass_flop,wave_g);
per_frame_32=ob_a=.03+.02*wave_r;
per_frame_33=ob_size=.05+.04*wave_b;
per_frame_34=ib_r=if(bass_flop,ob_b,ob_g);
per_frame_35=ib_b=if(treb_flop,ob_g,ob_r);
per_frame_36=ib_g=if(mid_flop,ob_r,ob_b);
per_frame_37=ib_a=.03+.02*wave_g;
per_frame_38=ib_size=.05+.04*ob_g;
per_frame_39=zoom=zoom+.08*mid_residual;
per_pixel_1=rot=if(above(q1,0),.4*sin(rad+q3+q4),.4*sin(rad+q2+q5));
per_pixel_2=zoom=zoom-rot/10;
per_pixel_3=cx=cx+.3*sin(x*7*q4);
per_pixel_4=cy=cy+.3*cos(y*5*q5);
warp_1=`shader_body
warp_2=`{
warp_3=`uv = frac(uv);
warp_4=`float2 dither_uv = uv_orig*texsize.xy*texsize_noise_lq.zw * 1 + rand_frame.xy;
warp_5=`float2 d = texsize.zw*12;
warp_6=`float3 dx = GetBlur3(uv_orig + float2(1,0)*d) - GetBlur3(uv_orig -float2(1,0)*d);
warp_7=`float3 dy = GetBlur3(uv_orig + float2(0,1)*d) - GetBlur3(uv_orig -float2(0,1)*d);
warp_8=`
warp_9=`float2 uvx = uv
warp_10=`           + (tex2D(sampler_noise_lq, dither_uv).xy-0.5)*texsize.zw*0
warp_11=`           - float2(dx.x,dy.x)*texsize.zw*8;
warp_12=`    ret.x = tex2D( sampler_fc_main, uvx ).x
warp_13=`          - (GetBlur3(uvx)-tex2D( sampler_fc_main, uvx )).x*0.1
warp_14=`          - 0.024;
warp_15=`
warp_16=`float2 uvy = uv_orig
warp_17=`           + (tex2D(sampler_noise_lq, dither_uv).xy-0.5)*texsize.zw*4
warp_18=`           - float2(dx.x,dy.x)*texsize.zw*4
warp_19=`           + float2(dx.y,dy.y)*texsize.zw*8;
warp_20=`
warp_21=`ret.y = tex2d(sampler_fc_main,uvy).y
warp_22=`      + (tex2D(sampler_noise_lq, dither_uv).xyz-0.5)*0.1
warp_23=`      - 0.012
warp_24=`      + (tex2d(sampler_pc_main,uv_orig).z)*0.2;
warp_25=`
warp_26=`
warp_27=`float2 uvz = uv_orig
warp_28=`           + (tex2D(sampler_noise_lq, dither_uv).xy-0.5)*texsize.zw*2
warp_29=`           + float2(dy.x,-dx.x)*texsize.zw*64
warp_30=`           + float2(dx.z,dy.z)*texsize.zw*0;
warp_31=`ret.z = tex2d(sampler_fc_main,uvz).z
warp_32=`      + (tex2d(sampler_fc_main,uvz).z-GetBlur2(uvz).z)*0.2 
warp_33=`      + (tex2D(sampler_noise_lq, dither_uv).xyz)*0.1
warp_34=`      - GetBlur3(uv_orig).x
warp_35=`      - saturate(1-GetBlur2(uv_orig).x)*0.04;
warp_36=`}
comp_1=`float3 ret1, fountain, sky, lava, uv_vol;
comp_2=`float2 rs0,rs,uv0, uv1, uv2, uv3, uv4, uv_l, uvc, dz1;
comp_3=`float sun, w, z, smoke, smoke2, skymask,lavmask,lavamod,fonmask;
comp_4=`static float2 dz = float2(texsize.z,texsize.w)*1;
comp_5=`static float trel = time/2;
comp_6=`static float vshift = .5-q29;
comp_7=`static float3 skycol = float3 (.1,.1,.2);
comp_8=`static float sm_dens = q32;
comp_9=`static float sm_lit  = q31;
comp_10=`static float2 sunpos = float2 (rand_preset.x,-.1-rand_preset.y/2+vshift)*aspect.xy;
comp_11=`float3 lavcol (float t) {return saturate(float3(t,pow(t,2.1),pow(t,6)));}
comp_12=`float3 foncol (float t) {return saturate(float3(t,pow(t,2.1),pow(t,4)));}
comp_13=`
comp_14=`shader_body {
comp_15=`float t = time*0.1; // set velocity here
comp_16=`float2 c = (uv-0.5)*aspect.wz;
comp_17=`float1 ang_hq = atan2(c.x,c.y);
comp_18=`float2 spiral = float2(ang_hq*M_INV_PI_2*2+t,aspect.w*log(length(c))*.6+ang_hq*M_INV_PI_2*2-t*4);
comp_19=`float2 mirror = 0.5 + (0.5 - abs( frac( spiral * 0.5 ) * 2.0 - 1.0 )); // mirror
comp_20=`uv = mirror;
comp_21=`
comp_22=`uv0 = uv;
comp_23=`//uv = (uv-.5)*1+.5;
comp_24=`uvc = (uv-.5)*aspect.xy+.5;
comp_25=`uv_l = uv + float2(.005*time,0);
comp_26=`
comp_27=`float berg1 = lum(tex2D (sampler_noise_mq,uv_l.x/4+.02*trel))/6-uv.y+.8;
comp_28=`float berg2 = lum(tex2D (sampler_noise_hq,uv_l.x/6))+uv.x-.5;
comp_29=`sun = .1/length(sin(uvc-sunpos)); //##Vorfaktor spielen
comp_30=`
comp_31=`uv2 = frac(uv);
comp_32=`fountain = 1*tex2D(sampler_fc_main,uv2).r +2* GetBlur2(uv2).r;
comp_33=`fountain=foncol(fountain.r);
comp_34=`
comp_35=`w = uv.y-berg2/4-vshift; //#hier spielen
comp_36=`z = .2/w;
comp_37=`skymask = saturate(-.2-8*q5*w); //32*w fuer mehr Leuchten
comp_38=`lavmask = saturate(-1-12*w); //lava background
comp_39=`
comp_40=`rs0.x = (uv.x-.5) * (1+abs(z))*2 ; rs0.y = z; //#hier an q29 anpassen
comp_41=`rs0 *= 4*(z<=0)+1;
comp_42=`
comp_43=`float glow = q26/length(rs0-float2(0.,1.5+w))/4;
comp_44=`rs0 *= 1+glow*glow;
comp_45=`rs.x = rs0*2; rs.y = rs0.y + trel*.5;
comp_46=`
comp_47=`float bridge = tex2D (sampler_main,uv).g*skymask;
comp_48=`
comp_49=`lavamod = saturate((tex2D (sampler_noise_hq,rs/16)-.5));
comp_50=`uv_vol = float3(rs*2,.2*trel+0*lavamod)*(z >=0); //# faster
comp_51=`lava = 2*saturate(tex3D (sampler_noisevol_hq,uv_vol)-.2);
comp_52=`lava = lava*lavamod/sqrt(abs(z))+glow;
comp_53=`
comp_54=`ret1 = (uv.y*(1+q23)+sun)*skycol*skymask + lavcol(lum(lava)) * (1-lavmask);
comp_55=`ret1 *= saturate(1-bridge*8);
comp_56=`
comp_57=`smoke = GetPixel(frac((uv-.5)*1+.5)).b; smoke *= smoke*q5;
comp_58=`ret1 *= saturate(1-smoke*sm_dens*skymask);
comp_59=`smoke2 = GetPixel((uv-.5)/2+.5).b*q30; ;
comp_60=`
comp_61=`ret1 += fountain -z*saturate(smoke+w*sm_lit)*float3(1,.4,0.1)*skymask; 
comp_62=`
comp_63=`ret1 += lavcol(saturate(bridge*z*z/16));
comp_64=`ret1 *= saturate(berg1*32);
comp_65=`ret1 = ret1*saturate(1-smoke2)+lavcol(smoke2)*1;
comp_66=`ret = 1-exp(-ret1*2); //exposure control
comp_67=`}
