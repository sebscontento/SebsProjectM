MILKDROP_PRESET_VERSION=201
PSVERSION=3
PSVERSION_WARP=3
PSVERSION_COMP=3
[preset00]
fRating=3.000
fGammaAdj=2.000
fDecay=0.980
fVideoEchoZoom=2.000
fVideoEchoAlpha=0.000
nVideoEchoOrientation=0
nWaveMode=0
bAdditiveWaves=0
bWaveDots=0
bWaveThick=0
bModWaveAlphaByVolume=0
bMaximizeWaveColor=1
bTexWrap=1
bDarkenCenter=0
bRedBlueStereo=0
bBrighten=0
bDarken=0
bSolarize=0
bInvert=0
fWaveAlpha=0.800
fWaveScale=0.010
fWaveSmoothing=0.750
fWaveParam=-0.240
fModWaveAlphaStart=0.750
fModWaveAlphaEnd=0.950
fWarpAnimSpeed=0.010
fWarpScale=0.010
fZoomExponent=1.00000
fShader=0.000
zoom=1.00000
rot=0.00000
cx=0.500
cy=0.500
dx=0.00000
dy=0.00000
warp=0.01000
sx=1.00000
sy=1.00000
wave_r=0.000
wave_g=0.200
wave_b=0.500
wave_x=0.500
wave_y=0.500
ob_size=0.500
ob_r=0.110
ob_g=0.000
ob_b=0.100
ob_a=0.030
ib_size=0.000
ib_r=0.000
ib_g=0.000
ib_b=0.000
ib_a=0.000
nMotionVectorsX=12.000
nMotionVectorsY=9.000
mv_dx=0.000
mv_dy=0.000
mv_l=0.900
mv_r=1.000
mv_g=1.000
mv_b=1.000
mv_a=0.000
b1n=0.400
b2n=0.000
b3n=0.000
b1x=1.000
b2x=1.000
b3x=1.000
b1ed=0.250
wavecode_0_enabled=0
wavecode_0_samples=512
wavecode_0_sep=0
wavecode_0_bSpectrum=0
wavecode_0_bUseDots=0
wavecode_0_bDrawThick=0
wavecode_0_bAdditive=0
wavecode_0_scaling=1.00000
wavecode_0_smoothing=0.50000
wavecode_0_r=1.000
wavecode_0_g=1.000
wavecode_0_b=1.000
wavecode_0_a=1.000
wavecode_1_enabled=0
wavecode_1_samples=512
wavecode_1_sep=0
wavecode_1_bSpectrum=0
wavecode_1_bUseDots=0
wavecode_1_bDrawThick=0
wavecode_1_bAdditive=0
wavecode_1_scaling=1.00000
wavecode_1_smoothing=0.50000
wavecode_1_r=1.000
wavecode_1_g=1.000
wavecode_1_b=1.000
wavecode_1_a=1.000
wavecode_2_enabled=0
wavecode_2_samples=512
wavecode_2_sep=0
wavecode_2_bSpectrum=0
wavecode_2_bUseDots=0
wavecode_2_bDrawThick=0
wavecode_2_bAdditive=0
wavecode_2_scaling=1.00000
wavecode_2_smoothing=0.50000
wavecode_2_r=1.000
wavecode_2_g=1.000
wavecode_2_b=1.000
wavecode_2_a=1.000
wavecode_3_enabled=0
wavecode_3_samples=512
wavecode_3_sep=0
wavecode_3_bSpectrum=0
wavecode_3_bUseDots=0
wavecode_3_bDrawThick=0
wavecode_3_bAdditive=0
wavecode_3_scaling=1.00000
wavecode_3_smoothing=0.50000
wavecode_3_r=1.000
wavecode_3_g=1.000
wavecode_3_b=1.000
wavecode_3_a=1.000
shapecode_0_enabled=0
shapecode_0_sides=4
shapecode_0_additive=0
shapecode_0_thickOutline=0
shapecode_0_textured=0
shapecode_0_num_inst=1
shapecode_0_x=0.500
shapecode_0_y=0.500
shapecode_0_rad=0.10000
shapecode_0_ang=0.00000
shapecode_0_tex_ang=0.00000
shapecode_0_tex_zoom=1.00000
shapecode_0_r=1.000
shapecode_0_g=0.000
shapecode_0_b=0.000
shapecode_0_a=1.000
shapecode_0_r2=0.000
shapecode_0_g2=1.000
shapecode_0_b2=0.000
shapecode_0_a2=0.000
shapecode_0_border_r=1.000
shapecode_0_border_g=1.000
shapecode_0_border_b=1.000
shapecode_0_border_a=0.100
shapecode_1_enabled=0
shapecode_1_sides=4
shapecode_1_additive=0
shapecode_1_thickOutline=0
shapecode_1_textured=0
shapecode_1_num_inst=1
shapecode_1_x=0.500
shapecode_1_y=0.500
shapecode_1_rad=0.10000
shapecode_1_ang=0.00000
shapecode_1_tex_ang=0.00000
shapecode_1_tex_zoom=1.00000
shapecode_1_r=1.000
shapecode_1_g=0.000
shapecode_1_b=0.000
shapecode_1_a=1.000
shapecode_1_r2=0.000
shapecode_1_g2=1.000
shapecode_1_b2=0.000
shapecode_1_a2=0.000
shapecode_1_border_r=1.000
shapecode_1_border_g=1.000
shapecode_1_border_b=1.000
shapecode_1_border_a=0.100
shapecode_2_enabled=0
shapecode_2_sides=4
shapecode_2_additive=0
shapecode_2_thickOutline=0
shapecode_2_textured=0
shapecode_2_num_inst=1
shapecode_2_x=0.500
shapecode_2_y=0.500
shapecode_2_rad=0.10000
shapecode_2_ang=0.00000
shapecode_2_tex_ang=0.00000
shapecode_2_tex_zoom=1.00000
shapecode_2_r=1.000
shapecode_2_g=0.000
shapecode_2_b=0.000
shapecode_2_a=1.000
shapecode_2_r2=0.000
shapecode_2_g2=1.000
shapecode_2_b2=0.000
shapecode_2_a2=0.000
shapecode_2_border_r=1.000
shapecode_2_border_g=1.000
shapecode_2_border_b=1.000
shapecode_2_border_a=0.100
shapecode_3_enabled=0
shapecode_3_sides=4
shapecode_3_additive=0
shapecode_3_thickOutline=0
shapecode_3_textured=0
shapecode_3_num_inst=1
shapecode_3_x=0.500
shapecode_3_y=0.500
shapecode_3_rad=0.10000
shapecode_3_ang=0.00000
shapecode_3_tex_ang=0.00000
shapecode_3_tex_zoom=1.00000
shapecode_3_r=1.000
shapecode_3_g=0.000
shapecode_3_b=0.000
shapecode_3_a=1.000
shapecode_3_r2=0.000
shapecode_3_g2=1.000
shapecode_3_b2=0.000
shapecode_3_a2=0.000
shapecode_3_border_r=1.000
shapecode_3_border_g=1.000
shapecode_3_border_b=1.000
shapecode_3_border_a=0.100
per_frame_init_1=mv_x=64;mv_y=48;
per_frame_init_2=dcsp=0;
per_frame_init_3=
per_frame_init_4=zoom = 1.0;
per_frame_init_5=warp = 0;
per_frame_init_6=rot = 0;
per_frame_init_7=dx = 0;
per_frame_init_8=dy = 0;
per_frame_init_9=sx = 1;
per_frame_init_10=sy = -1;
per_frame_init_11=cx = 0.5;
per_frame_init_12=cy = 0.5;
per_frame_init_13=
per_frame_init_14=scale = 1;
per_frame_init_15=q6 = 1;
per_frame_init_16=q6h = 1;
per_frame_init_17=q2h=0;
per_frame_init_18=q5=1;
per_frame_1=
per_frame_2=//uncommenting this block will make decay start at 0 when preset begins, and rise to the "max_decay" value
per_frame_3=//max_decay = 0.97;
per_frame_4=//dcsp = dcsp + 0.007*(75/fps);
per_frame_5=//dcsp = min(dcsp , max_decay);
per_frame_6=//decay = dcsp;
per_frame_7=
per_frame_8=//volume, and volume based time. framerate adjusted
per_frame_9=vol = (bass+mid+treb)*0.25;
per_frame_10=vol = vol*vol;
per_frame_11=
per_frame_12=mtime = mtime + vol * 0.01 * (75/fps);
per_frame_13=
per_frame_14=q1 = vol;
per_frame_15=//q2 = mtime;
per_frame_16=
per_frame_17=//non bass volume
per_frame_18=vol2 = (mid+treb)*0.33;
per_frame_19=vol2 = vol2*vol2;
per_frame_20=
per_frame_21=m2time = m2time + vol2 * 0.01 * (75/fps);
per_frame_22=
per_frame_23=//q3 = vol2;
per_frame_24=//q4 = m2time;
per_frame_25=
per_frame_26=
per_frame_27=//krash's beat detection code
per_frame_28=volume = 0.3*(bass+mid+att);
per_frame_29=beatrate = equal(beatrate,0) + (1-equal(beatrate,0))*(below(volume,0.01) + (1-below(volume,0.01))*beatrate);
per_frame_30=lastbeat = lastbeat + equal(lastbeat,0)*time;
per_frame_31=meanbass_att = 0.1*(meanbass_att*9 + bass_att);
per_frame_32=peakbass_att = max(bass_att,peakbass_att);
per_frame_33=beatrate = max(if(beat,if(below(time-lastbeat,2*beatrate),0.1*(beatrate*9 + time - lastbeat),beatrate),beatrate),0.1);
per_frame_34=peakbass_att = beat*bass_att + (1-beat)*peakbass_att*(above(time - lastbeat, 2*beatrate)*0.95 + (1-above(time - lastbeat, 2*beatrate))*0.995);
per_frame_35=lastbeat = beat*time + (1-beat)*lastbeat;
per_frame_36=peakbass_att = max(peakbass_att,1.1*meanbass_att);
per_frame_37=beat = above(volume,0.8)*below(peakbass_att - bass_att, 0.05*peakbass_att)*above(time - lastbeat, 0.1 + 0.5*(beatrate - 0.1));
per_frame_38=beatcounter = beatcounter + beat;
per_frame_39=mode = if(beat*equal(beatcounter%2,0),1-mode,mode);
per_frame_40=flip = 2*mode-1;
per_frame_41=
per_frame_42=beatdrop = if( equal(beatdrop,0) , beat , max(beatdrop - 0.01*(75/fps) , 0) );
per_frame_43=
per_frame_44=//clone shape position calc
per_frame_45=xp = int(rand(6))-3;
per_frame_46=yp = int(rand(4))-2;
per_frame_47=q3 = xp/10 + 0.5;
per_frame_48=q4 = yp/8 * 1.025 + 0.5;
per_frame_49=
per_frame_50=//clone shape 1 scale
per_frame_51=scale = scale * q6;
per_frame_52=scale = if( above(scale,3.5) , 0.5 , scale );
per_frame_53=scale = if( q5 , 1 , scale );
per_frame_54=
per_frame_55=
per_frame_56=q8 = flip;
per_frame_57=
per_frame_58=q5 = equal(beatdrop,0);
per_frame_59=q2 = equal(beatdrop,1);
per_frame_60=xpos = if( q2 , q3 , xpos );
per_frame_61=ypos = if( q2 , q4 , ypos );
per_frame_62=xpos2 = xpos*beatdrop + 0.5*(1-beatdrop);
per_frame_63=ypos2 = ypos*beatdrop + 0.5*(1-beatdrop);
per_frame_64=dx = -(xpos2 - 0.5)*0.04; 
per_frame_65=dy = (ypos2 - 0.5)*0.04; 
per_frame_66=
per_frame_67=q6 = 1 + beatdrop*0.03;
per_frame_68=
per_frame_69=decay = 1 - (1-q5)*0.01;
per_frame_70=
per_frame_71=monitor = ypos2;
per_frame_72=
per_frame_73=zoom = 1;
per_frame_74=sx = q6;
per_frame_75=sy = q6;
per_frame_76=
per_frame_77=warp=0;
per_frame_78=
per_frame_79=//dx = sin(time/4)*0.15;
per_frame_80=cx = 0.5 + dx ;
per_frame_81=
per_frame_82=gamma = 1 + beatdrop*beatdrop;
per_frame_83=
per_frame_84=ob_a = 0;//ob_a * (1- beatdrop*0.98);
warp_1=`sampler sampler_worms;
warp_2=`float3 color, mus;
warp_3=`float2 uv1, uv6;
warp_4=`float dx,dy;
warp_5=`
warp_6=`shader_body {
warp_7=`
warp_8=`uv1 = (uv-.5);
warp_9=`
warp_10=`float2 ang2= tex2D (sampler_noise_hq,uv1/3+.006*time).xy;
warp_11=`uv6 = mul(uv1,float2x2(ang2.y,-ang2.x,ang2.x,ang2.y));
warp_12=`
warp_13=`mus = abs(.5*cos(uv6.y*14)-(cos(uv6.x*71)));
warp_14=`mus *= float3 (1,.96,.9)/25;
warp_15=`
warp_16=`uv6 = .2*sin(12*uv+rand_frame);
warp_17=`float3 dots = .001/length(uv6)* float3 (0.2,1,1);
warp_18=`
warp_19=`//dots = lum(tex2D (sampler_noise_hq,uv +rand_frame));
warp_20=`//dots = (dots-.7) * (dots >= .7) * float3 (0.2,1,1);
warp_21=`
warp_22=`mus -= dots;
warp_23=`
warp_24=`
warp_25=`float3 blur = GetBlur1(frac(uv));
warp_26=`
warp_27=`float2 hor = float2 (texsize.z,0);
warp_28=`float2 ver = float2 (0,texsize.w);
warp_29=`hor = float2 (.004,0);
warp_30=`ver = float2 (0,.004);
warp_31=`
warp_32=`
warp_33=`
warp_34=`float dx = lum(GetPixel(uv+hor)-GetPixel(uv-hor));
warp_35=`float dy = lum(GetPixel(uv+ver)-GetPixel(uv-ver));
warp_36=`
warp_37=`float2 zz = float2 (dx,dy);
warp_38=`
warp_39=`
warp_40=`float3 crisp= tex2D(sampler_main,uv+zz*.02);
warp_41=`crisp +=.015 - length(zz)*blur/1.5;
warp_42=`
warp_43=`float3 ret1 = crisp - lum(blur)*.012 + mus;
warp_44=`//ret1 = abs(mus)/2;
warp_45=`ret = ret1 * .99 -  .04 ;
warp_46=`}
comp_1=`static const float3 lightCol = float3( 1.0, 0.3, 0.1 ) * 2.0;
comp_2=`static const float3 lightCol2 = float3( 1.0, 0.7, 0.5 ) * 1.0;
comp_3=`
comp_4=`sampler sampler_rand00;
comp_5=`
comp_6=`shader_body
comp_7=`{
comp_8=`float4 dbg=0.0;
comp_9=`
comp_10=`//float3 lightCol = { q10, q11, q12 };
comp_11=`
comp_12=`float3 main = tex2D( sampler_main, uv );
comp_13=`main = -log( 1.0 - main* 0.8 );
comp_14=`main = min( main, 3.0 );
comp_15=`
comp_16=`
comp_17=`float2 planetuvs = (uv-0.5)*aspect*1.0; 
comp_18=`planetuvs = float2( planetuvs.x * q8 - planetuvs.y * q9, planetuvs.x * q9 + planetuvs.y * q8 );
comp_19=`planetuvs += 0.5;
comp_20=`float4 planet = tex2D( sampler_rand00, planetuvs );
comp_21=`float4 planetOrig = planet;
comp_22=`planet *= (rad*q7);
comp_23=`
comp_24=`
comp_25=`
comp_26=`float3 uv_sphere;
comp_27=`uv_sphere.xy = (uv - 0.5)*q1.xx*aspect;
comp_28=`uv_sphere.z = sqrt( 1.0 - dot( uv_sphere.xy, uv_sphere.xy ) );
comp_29=`
comp_30=`float3 normal = uv_sphere;
comp_31=`
comp_32=`
comp_33=`
comp_34=`
comp_35=`//lightvectors
comp_36=`float3 lightvec;
comp_37=`lightvec.xy = (uv_orig - float2(q3,q4)) * aspect.xy;
comp_38=`float distanceToLight = length( lightvec.xy );
comp_39=`lightvec.z = 0.15;
comp_40=`lightvec = normalize( lightvec );
comp_41=`
comp_42=`float3 lightvec2 = normalize( float3( q6, 0.3, 0.2 ) );
comp_43=`
comp_44=`
comp_45=`normal.xy *= -1.0;
comp_46=`float normalLength = length( normal.xy );
comp_47=`normal /= normalLength;
comp_48=`
comp_49=`float3 redlight = dot( lightvec, normal );
comp_50=`redlight = saturate( redlight );
comp_51=`redlight *= normalLength > 1.0 ? saturate( (normalLength - 1.0)*0.5 ) : saturate( normal.z * 2.0 );
comp_52=`redlight *= lightCol;
comp_53=`
comp_54=`
comp_55=`//light2----
comp_56=`float3 sunamt = saturate( dot( lightvec2, normal ) );
comp_57=`
comp_58=`//ambientlight--
comp_59=`float3 ambientlight = (normal.y*0.5+0.5) * float3(0.4,0.7,1.0)*0.5;
comp_60=`
comp_61=`//diffuse
comp_62=`float3 diffuse = lerp( ambientlight, lightCol2, sunamt );
comp_63=`diffuse *= 0.6;
comp_64=`diffuse += redlight;
comp_65=`
comp_66=`
comp_67=`
comp_68=`//specular----------
comp_69=`float3 viewVec = float3( (uv-0.5)*q1*aspect, -0.5 );
comp_70=`viewVec = normalize( viewVec );
comp_71=`
comp_72=`float3 R = reflect( viewVec, normal );
comp_73=`R = normalize( R );
comp_74=`
comp_75=`//main ref
comp_76=`float3 specular = saturate( dot( R, lightvec ) );
comp_77=`
comp_78=`
comp_79=`//inside ref
comp_80=`float3 Ri = reflect( viewVec, normalize(normal * float3(1.0,0.5,1.0)) );
comp_81=`float3 speculari = saturate( dot( Ri, lightvec ) );
comp_82=`//specular = max( specular, speculari );
comp_83=`
comp_84=`specular = pow( specular, float3( 1.0, 1.0, 1.0 )*28.0 );
comp_85=`specular = saturate( specular * 2.0 - 1.0 );
comp_86=`specular *= lightCol * 2.0;
comp_87=`
comp_88=`//spec sunlight
comp_89=`float3 specsun = dot( R, lightvec2 ); 
comp_90=`specsun = pow( specsun, 38.0 );
comp_91=`specsun = saturate( specsun * 1.5 );
comp_92=`specsun *= lightCol2 * 2.0;
comp_93=`specular += specsun;
comp_94=`
comp_95=`ret = main * normal.z;
comp_96=`ret += diffuse;
comp_97=`
comp_98=`
comp_99=`ret += specular;
comp_100=`
comp_101=`
comp_102=`ret = lerp( ret, planet, planet.a )-bass_att*0.5;
comp_103=`ret += planetOrig * planetOrig * 0.5;
comp_104=`
comp_105=`float3 lightSource = saturate( 1.0 - distanceToLight*9.0 );
comp_106=`lightSource *= lightSource * lightCol * 4.0;
comp_107=`lightSource *= 3.0 - planetOrig.a * 2.0;
comp_108=`ret += lightSource;
comp_109=`
comp_110=`
comp_111=`
comp_112=`
comp_113=`ret = dbg.a == 1.0 ? dbg.rgb : ret; //debug output
comp_114=`
comp_115=`
comp_116=`//tonemapping
comp_117=`ret = 1.0 - exp( -ret * 1.0 );
comp_118=`
comp_119=`
comp_120=`//ret = planet;
comp_121=`
comp_122=`ret-=roam_sin.wzy*roam_cos.zxy;
comp_123=`}
