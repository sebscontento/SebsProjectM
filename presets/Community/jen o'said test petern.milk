MILKDROP_PRESET_VERSION=201
PSVERSION=3
PSVERSION_WARP=2
PSVERSION_COMP=3
[preset00]
fRating=2.000
fGammaAdj=1.000
fDecay=0.975
fVideoEchoZoom=2.000
fVideoEchoAlpha=0.000
nVideoEchoOrientation=3
nWaveMode=2
bAdditiveWaves=0
bWaveDots=0
bWaveThick=1
bModWaveAlphaByVolume=0
bMaximizeWaveColor=0
bTexWrap=1
bDarkenCenter=0
bRedBlueStereo=0
bBrighten=0
bDarken=0
bSolarize=0
bInvert=0
fWaveAlpha=0.800
fWaveScale=1.605
fWaveSmoothing=0.700
fWaveParam=0.000
fModWaveAlphaStart=0.750
fModWaveAlphaEnd=0.950
fWarpAnimSpeed=1.459
fWarpScale=2.007
fZoomExponent=1.00000
fShader=0.700
zoom=0.99990
rot=0.00000
cx=0.500
cy=0.500
dx=0.00000
dy=0.00000
warp=0.01000
sx=0.99990
sy=1.00000
wave_r=0.500
wave_g=0.500
wave_b=0.500
wave_x=0.500
wave_y=0.500
ob_size=0.000
ob_r=0.000
ob_g=0.000
ob_b=0.200
ob_a=1.000
ib_size=0.000
ib_r=0.000
ib_g=0.000
ib_b=0.250
ib_a=1.000
nMotionVectorsX=12.000
nMotionVectorsY=9.000
mv_dx=0.000
mv_dy=0.000
mv_l=0.900
mv_r=1.000
mv_g=1.000
mv_b=1.000
mv_a=0.000
b1n=0.000
b2n=0.000
b3n=0.000
b1x=1.000
b2x=1.000
b3x=1.000
b1ed=0.250
wavecode_0_enabled=0
wavecode_0_samples=512
wavecode_0_sep=0
wavecode_0_bSpectrum=0
wavecode_0_bUseDots=0
wavecode_0_bDrawThick=0
wavecode_0_bAdditive=0
wavecode_0_scaling=1.00000
wavecode_0_smoothing=0.50000
wavecode_0_r=1.000
wavecode_0_g=1.000
wavecode_0_b=1.000
wavecode_0_a=1.000
wavecode_1_enabled=0
wavecode_1_samples=512
wavecode_1_sep=0
wavecode_1_bSpectrum=0
wavecode_1_bUseDots=0
wavecode_1_bDrawThick=0
wavecode_1_bAdditive=0
wavecode_1_scaling=1.00000
wavecode_1_smoothing=0.50000
wavecode_1_r=1.000
wavecode_1_g=1.000
wavecode_1_b=1.000
wavecode_1_a=1.000
wavecode_2_enabled=0
wavecode_2_samples=512
wavecode_2_sep=0
wavecode_2_bSpectrum=0
wavecode_2_bUseDots=0
wavecode_2_bDrawThick=0
wavecode_2_bAdditive=0
wavecode_2_scaling=1.00000
wavecode_2_smoothing=0.50000
wavecode_2_r=1.000
wavecode_2_g=1.000
wavecode_2_b=1.000
wavecode_2_a=1.000
wavecode_3_enabled=0
wavecode_3_samples=512
wavecode_3_sep=0
wavecode_3_bSpectrum=0
wavecode_3_bUseDots=0
wavecode_3_bDrawThick=0
wavecode_3_bAdditive=0
wavecode_3_scaling=1.00000
wavecode_3_smoothing=0.50000
wavecode_3_r=1.000
wavecode_3_g=1.000
wavecode_3_b=1.000
wavecode_3_a=1.000
shapecode_0_enabled=0
shapecode_0_sides=13
shapecode_0_additive=0
shapecode_0_thickOutline=1
shapecode_0_textured=1
shapecode_0_num_inst=1
shapecode_0_x=0.500
shapecode_0_y=0.500
shapecode_0_rad=0.50326
shapecode_0_ang=1.69646
shapecode_0_tex_ang=0.00000
shapecode_0_tex_zoom=1.10462
shapecode_0_r=1.000
shapecode_0_g=1.000
shapecode_0_b=1.000
shapecode_0_a=1.000
shapecode_0_r2=1.000
shapecode_0_g2=1.000
shapecode_0_b2=1.000
shapecode_0_a2=0.100
shapecode_0_border_r=1.000
shapecode_0_border_g=1.000
shapecode_0_border_b=1.000
shapecode_0_border_a=0.100
shape_0_per_frame1=//r = 0.5+0.25*sin(time*0.567)+0.25*sin(time*0.673);
shape_0_per_frame2=//b = 0.5+0.25*sin(time*0.617)+0.25*sin(time*0.493);
shape_0_per_frame3=//= 0.5+0.25*sin(time*0.771)+0.25*sin(time*0.317);
shape_0_per_frame4=//2 = 0.5+0.25*sin(time*0.417)+0.25*sin(time*0.773);
shape_0_per_frame5=//b2 = 0.5+0.25*sin(time*0.663)+0.25*sin(time*0.893);
shape_0_per_frame6=//g2 = 0.5+0.25*sin(time*0.317)+0.25*sin(time*0.327);
shape_0_per_frame7=ang = q1;
shape_0_per_frame8=x = 0.5 + 0.1*sin(q1*1.432)+0.1*sin(q1*0.342);
shape_0_per_frame9=y= 0.5 + 0.1*sin(q1*1.311)+0.1*sin(q1*0.394);
shapecode_1_enabled=0
shapecode_1_sides=3
shapecode_1_additive=0
shapecode_1_thickOutline=1
shapecode_1_textured=1
shapecode_1_num_inst=1
shapecode_1_x=0.500
shapecode_1_y=0.500
shapecode_1_rad=0.50326
shapecode_1_ang=1.69646
shapecode_1_tex_ang=0.00000
shapecode_1_tex_zoom=1.48886
shapecode_1_r=1.000
shapecode_1_g=1.000
shapecode_1_b=1.000
shapecode_1_a=0.500
shapecode_1_r2=1.000
shapecode_1_g2=1.000
shapecode_1_b2=1.000
shapecode_1_a2=0.500
shapecode_1_border_r=1.000
shapecode_1_border_g=1.000
shapecode_1_border_b=0.000
shapecode_1_border_a=1.000
shape_1_per_frame1=//r = 0.5+0.25*sin(time*0.567)+0.25*sin(time*0.673);
shape_1_per_frame2=//b = 0.5+0.25*sin(time*0.617)+0.25*sin(time*0.493);
shape_1_per_frame3=//= 0.5+0.25*sin(time*0.771)+0.25*sin(time*0.317);
shape_1_per_frame4=//2 = 0.5+0.25*sin(time*0.417)+0.25*sin(time*0.773);
shape_1_per_frame5=//b2 = 0.5+0.25*sin(time*0.663)+0.25*sin(time*0.893);
shape_1_per_frame6=//g2 = 0.5+0.25*sin(time*0.317)+0.25*sin(time*0.327);
shape_1_per_frame7=ang = q1 + 3.1415;
shape_1_per_frame8=x = 0.5 + 0.1*sin(q1*1.432)+0.1*sin(q1*0.342);
shape_1_per_frame9=y= 0.5 + 0.1*sin(q1*1.311)+0.1*sin(q1*0.394);
shapecode_2_enabled=0
shapecode_2_sides=3
shapecode_2_additive=0
shapecode_2_thickOutline=1
shapecode_2_textured=1
shapecode_2_num_inst=1
shapecode_2_x=0.500
shapecode_2_y=0.500
shapecode_2_rad=0.50326
shapecode_2_ang=1.69646
shapecode_2_tex_ang=0.00000
shapecode_2_tex_zoom=0.74192
shapecode_2_r=1.000
shapecode_2_g=1.000
shapecode_2_b=1.000
shapecode_2_a=0.500
shapecode_2_r2=1.000
shapecode_2_g2=1.000
shapecode_2_b2=1.000
shapecode_2_a2=0.500
shapecode_2_border_r=0.000
shapecode_2_border_g=0.500
shapecode_2_border_b=1.000
shapecode_2_border_a=1.000
shape_2_per_frame1=//r = 0.5+0.25*sin(time*0.567)+0.25*sin(time*0.673);
shape_2_per_frame2=//b = 0.5+0.25*sin(time*0.617)+0.25*sin(time*0.493);
shape_2_per_frame3=//= 0.5+0.25*sin(time*0.771)+0.25*sin(time*0.317);
shape_2_per_frame4=//2 = 0.5+0.25*sin(time*0.417)+0.25*sin(time*0.773);
shape_2_per_frame5=//b2 = 0.5+0.25*sin(time*0.663)+0.25*sin(time*0.893);
shape_2_per_frame6=//g2 = 0.5+0.25*sin(time*0.317)+0.25*sin(time*0.327);
shape_2_per_frame7=ang = q1+ 3.1415*0.5;
shape_2_per_frame8=x = 0.5 + 0.1*sin(q1*1.432)+0.1*sin(q1*0.342);
shape_2_per_frame9=y= 0.5 + 0.1*sin(q1*1.311)+0.1*sin(q1*0.394);
shapecode_3_enabled=0
shapecode_3_sides=3
shapecode_3_additive=0
shapecode_3_thickOutline=1
shapecode_3_textured=1
shapecode_3_num_inst=1
shapecode_3_x=0.500
shapecode_3_y=0.500
shapecode_3_rad=0.50326
shapecode_3_ang=1.69646
shapecode_3_tex_ang=0.00000
shapecode_3_tex_zoom=0.67165
shapecode_3_r=1.000
shapecode_3_g=1.000
shapecode_3_b=1.000
shapecode_3_a=0.500
shapecode_3_r2=1.000
shapecode_3_g2=1.000
shapecode_3_b2=1.000
shapecode_3_a2=0.500
shapecode_3_border_r=0.000
shapecode_3_border_g=1.000
shapecode_3_border_b=1.000
shapecode_3_border_a=1.000
shape_3_per_frame1=//r = 0.5+0.25*sin(time*0.567)+0.25*sin(time*0.673);
shape_3_per_frame2=//b = 0.5+0.25*sin(time*0.617)+0.25*sin(time*0.493);
shape_3_per_frame3=//= 0.5+0.25*sin(time*0.771)+0.25*sin(time*0.317);
shape_3_per_frame4=//2 = 0.5+0.25*sin(time*0.417)+0.25*sin(time*0.773);
shape_3_per_frame5=//b2 = 0.5+0.25*sin(time*0.663)+0.25*sin(time*0.893);
shape_3_per_frame6=//g2 = 0.5+0.25*sin(time*0.317)+0.25*sin(time*0.327);
shape_3_per_frame7=ang = q1 - 3.1415*0.5;
shape_3_per_frame8=x = 0.5 + 0.1*sin(q1*1.432)+0.1*sin(q1*0.342);
shape_3_per_frame9=y= 0.5 + 0.1*sin(q1*1.311)+0.1*sin(q1*0.394);
per_frame_1=dec_med = pow (0.9, 30/fps);
per_frame_2=dec_slow = pow (0.99, 30/fps);
per_frame_3=beat = max (max (bass, mid), treb); 
per_frame_4=avg = avg*dec_slow + beat*(1-dec_slow);
per_frame_5=is_beat = above(beat, .5+avg+peak) * above (time, t0+.2);
per_frame_6=t0 = is_beat*time + (1-is_beat)*t0;
per_frame_7=peak = is_beat * beat + (1-is_beat)*peak*dec_med;
per_frame_8=index = (index + is_beat) %8;
per_frame_9=index2 = (index2 + is_beat*bnot(index))%8;
per_frame_10=
per_frame_11=q20 = avg;
per_frame_12=q21 = beat;
per_frame_13=q22 = peak;
per_frame_14=q23 = index;
per_frame_15=q24 = is_beat;
per_frame_16=q26 = bass + mid + treb;
per_frame_17=monitor = index;
per_frame_18=k1 =  is_beat*bnot(index)*bnot(index2);
per_frame_19=p1 =  k1*(p1+1) + (1-k1)*p1;
per_frame_20=p2 = dec_med * p2+ (1-dec_med)*p1;
per_frame_21=p3 = dec_med * p3+ (1-dec_med)*p2;
per_frame_22=rott = p3 * 3.1416/4;
per_frame_23=
per_frame_24=pos = pos + q20/140;
per_frame_25=q28 = pos;
per_frame_26=q27 = index2;
per_frame_27=q1 = cos(rott);
per_frame_28=q2 = sin(rott);
per_frame_29=q3 = -q2;
per_frame_30=q4 = q1;
per_frame_31=
per_frame_32=trel = time/10;
per_frame_33=q5 = cos(trel);
per_frame_34=q6 = sin(trel);
per_frame_35=q7 = -q6;
per_frame_36=q8 = q5;
per_frame_37=
per_frame_38=
per_frame_39=
per_frame_40=zoom = 1.0;
per_frame_41=rot = -0.00 * index;
per_frame_42=
per_frame_43=q32 = pow(0.99, 30/fps); //fade
warp_1=`shader_body
warp_2=`{
warp_3=`    // sample previous frame
warp_4=`    ret = tex2D( sampler_main, uv ).xyz;
warp_5=`    
warp_6=`    // darken (decay) over time
warp_7=`    ret = ret- (ret*.5);
warp_8=`    ret = ret*(abs(GetBlur2(uv)-.5))*5;
warp_9=`    ret = ret - .01;
warp_10=`}
comp_1=`#define sat saturate
comp_2=`static const float tele = q31; 
comp_3=`static const float2 k1 = float2(8,16);  
comp_4=`static const float quality = 6, depth = q28/tele, maxdist = 8, dist0 = .5, hordist = 10;
comp_5=`float3 neu, rsl0, rsl, rsl2, rsl3, rsl4, ret1, screen3, sun, sky;
comp_6=`float2 dz, uv1, uv2;
comp_7=`float  dist, lprof,noise,mask, fog, delta, gmask,gmask2,water,sun0;
comp_8=`float  cloud, cloud2, bird, refl, dc;
comp_9=`static const float2 hor = float2 (0.002,0);
comp_10=`static const float2 ver = float2 (0,0.002);
comp_11=`static const float2 mov = float2 (q25,q26);
comp_12=`static const float day = q21, night = 1-day;
comp_13=`static const float3 lightcol = saturate(float3 (1+day,.4+day,.2+day));
comp_14=`static const float3 fogcol = lerp(lightcol,lightcol.bgr,q24)*.8 + .6;
comp_15=`static const float2 fogdens = float2(q23,(1-q23)*4);
comp_16=`static const float3 wcol = .5 + .5*(rand_preset.xyz-.5);
comp_17=`static const float3 t = float3(q14,q15,q16);
comp_18=`static const float3 s = float3(q17,q18,q19);
comp_19=`static const float3 ts = -cross(s,t);
comp_20=`
comp_21=`float3 project  (float dist) {float z, tmp; 
comp_22=`  tmp = mul(-s,screen3);
comp_23=`  z = dist/(abs(tmp)+dist0/hordist)*sign(tmp);
comp_24=`  gmask = saturate(z + maxdist) * (z <= 0); 
comp_25=`  return float3(mul(float2x3(ts,t),cross(s*q27,screen3))*z,-z/hordist);}
comp_26=`
comp_27=`float3 project2  (float dist) {float z, tmp; 
comp_28=`  tmp = mul(-s,screen3-float3(0,.03,0));
comp_29=`  z = dist/(abs(tmp)+dist0/hordist)*sign(tmp);
comp_30=`  z = pow(z,.7)*sign(z)*2;
comp_31=`  gmask2 = (z >= -maxdist) * (z <= maxdist); //#
comp_32=`  return float3(mul(float2x3(ts,t),cross(s,screen3))*-abs(z),-z/hordist);} //#achtung gmask2 weg wg. sun
comp_33=`
comp_34=`float noise4 (float2 uvi) { float n1,n2,n3,n4,n5,zv; zv = 0.004*time;
comp_35=`  n1 = lum(tex2D(sampler_noise_hq, (uvi)));
comp_36=`  n2 = lum(tex2D(sampler_noise_hq, (uvi*2+zv)));
comp_37=`  n3 = lum(tex2D(sampler_noise_hq, (uvi*4+zv)));
comp_38=`  n4 = lum(tex2D(sampler_noise_hq, (uvi*8+zv)));
comp_39=`  n5 = lum(tex2D(sampler_noise_hq, (uvi*16+zv)));
comp_40=`  return n1 + n2/2 + n3/4 + n4/8 +0*n5/16 - .5;}
comp_41=`
comp_42=`shader_body {screen3 = float3 ((uv-float2(.5,.5-q32))*aspect.xy+float2(0,-.05*pow(uv.x-.5,2)),tele);
comp_43=`
comp_44=`//PROJEKTION LAND
comp_45=`dist = dist0;
comp_46=`for (int m=1; m <= quality; m++) {
comp_47=`  rsl0 = project(dist);
comp_48=`  rsl = rsl0 +float3(mov,0);
comp_49=`  lprof =  lum(GetBlur1(frac(rsl.xy)).rg)-.5 ; //mittelwert null !#
comp_50=`  dist += -lprof/quality*depth;//rsl3.z; //#
comp_51=`}
comp_52=`neu = max(gmask,gmask2)*GetPixel(rsl.xy)*float3(1,1,0);
comp_53=`
comp_54=`//WASSER
comp_55=`water = sat(2.5+2*sin(6.28/2*rsl.xy)-8*neu.g);
comp_56=`float2 ripple = tex2D (sampler_noise_hq,rsl.xy*12-.2*time).rg;;
comp_57=`rsl.xy += water* .006*ripple*(1);
comp_58=`neu = lerp(neu,sat(lum(neu.rg)*wcol),water);
comp_59=`float reflmask = saturate(2*water+4*(neu.r-1.5*neu.g))*gmask;
comp_60=`
comp_61=`rsl3 = project2(dist0); //benoetigt fuer delta, sun etc.
comp_62=`delta = abs(.2/rsl3.z)*gmask;
comp_63=`delta = (1-abs(rsl3.z))*gmask;
comp_64=`dz.x = lum(GetPixel (frac(rsl.xy-delta*hor)).rg*k1) - lum(GetPixel (frac(rsl.xy+delta*hor)).rg*k1);
comp_65=`dz.y = lum(GetPixel (frac(rsl.xy-delta*ver)).rg*k1) - lum(GetPixel (frac(rsl.xy+delta*ver)).rg*k1);
comp_66=`//dz.x += .5*lum(GetBlur1 (frac(rsl.xy-delta*hor)).rg*k1) - .5*lum(GetBlur1 (frac(rsl.xy+delta*hor)).rg*k1);
comp_67=`//dz.y += .5*lum(GetBlur1 (frac(rsl.xy-delta*ver)).rg*k1) - .5*lum(GetBlur1 (frac(rsl.xy+delta*ver)).rg*k1);
comp_68=`
comp_69=`//dz.x = 0; //nicht so toll aber geringere GPU-Last
comp_70=`dz *= q30;
comp_71=`
comp_72=`//PROJEKTION HIMMEL
comp_73=`rsl4 = rsl3 + float3(dz*16*length(dz),0)*gmask;
comp_74=`rsl2 =  rsl4  + float3(mov,0);
comp_75=`uv2  =  rsl2.xy/16 +.025*noise4(rsl2.xy/8);
comp_76=`cloud  = lum(tex2D (sampler_noise_hq,uv2));
comp_77=`cloud2 = lum(tex2D (sampler_noise_hq,uv2 + float2(0,-.008)*night));
comp_78=`dc    = cloud-cloud2;
comp_79=`cloud = pow(sat(cloud-q20),1.2);
comp_80=`
comp_81=`neu *= sat(day*.4+.15*q5);
comp_82=`//neu += pow(sat(.05/neu.g),4)*.8;
comp_83=`
comp_84=`//SCHATTENWURF
comp_85=`neu -= dz.y* gmask*(.2+night)*lightcol;
comp_86=`
comp_87=`//BELEUCHTUNG
comp_88=`noise = noise4 (rsl.xy/16-time*.02)-.25;
comp_89=`
comp_90=`//HIMMEL
comp_91=`float3 rsl5 = float3(rsl3.xy/hordist,rsl3.z) ;
comp_92=`sun0 = .15/length(rsl5+dc/2+float2(0,night*.6)) * night;
comp_93=`sun = pow(sun0,1)*lightcol;
comp_94=`
comp_95=`float sky00 = pow(rsl5.x,2)+pow(rsl5.y-night,2)+.5; //richt.abh.#
comp_96=`float3 skyb = pow(sky00* (day+0.25)/4,float3(.9,.8,.4)+.2*(slow_roam_sin-.5)) ;;
comp_97=`float3 sky0 =  (sun)*sat(1-gmask*4) + skyb;
comp_98=`sky = skyb* sat(1-sun0*1-cloud) + sun + sat(.75+2*day-rsl3.y/hordist)*(cloud*q5*lightcol + dc);
comp_99=`
comp_100=`//FLASH
comp_101=`//sky += abs(.04/length(rsl5.xy+dc*4-.5*rand_frame.xy)) * float3(0,.25,1) *(bass>=1);
comp_102=`
comp_103=`//REFLEKTION
comp_104=`neu += sat(reflmask * (.4+.2*day)*(sky));
comp_105=`
comp_106=`ret1 = lerp(neu,sky,saturate(1-2*gmask));
comp_107=`
comp_108=`
comp_109=`//HORIZONT
comp_110=`noise = tex2D (sampler_noise_hq,rsl.xy/4+.006*time).r-.5; //# unmoduliertes rsl nehmen !
comp_111=`dist = sat(pow(abs(rsl5.z-.04),fogdens.y*(2-gmask))); //blau: kuehler morgennebel #
comp_112=`ret1 = lerp(ret1, sat(sky0+lum(sky0)*fogcol), fogdens.x*sat(dist-gmask*(lprof*2 -noise/2)));
comp_113=`
comp_114=`//Vogel
comp_115=`bird = GetPixel((uv-.5)+.5).b;
comp_116=`ret1 = ret1 * sat(1-2*bird)+saturate(GetPixel(uv).b - GetPixel(uv-.002).b)*0;
comp_117=`
comp_118=`ret1-=roam_sin.wzy*roam_cos;
comp_119=`
comp_120=`
comp_121=`ret = 1-exp(-ret1*1.5+.15); //# abends hier
comp_122=`
comp_123=`}
comp_124=`written by martin
comp_125=`END
